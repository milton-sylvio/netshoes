{"version":3,"sources":["../../src/js/cart.jsx"],"names":["Cart","cart_bt_delete","cart_list_produtcts","list_products","total_items","total_amount","total_installment","data_product_id","total","items","init","showProducts","fileJson","xmlhttp","Util","verifyXmlHttp","onreadystatechange","readyState","status","dadosJSON","JSON","parse","responseText","products","div","document","getElementById","id","sku","title","description","available_sizes","style","price","installments","price_installments","currency_id","currency_format","shipping","sort","a","b","forEach","prod","availableSizes","formatCoin","currencyId","currencyFormat","isFreeShipping","parseFloat","toFixed","listing","innerHTML","localStorage","setItem","stringify","actionAddCart","e","eval","console","error","open","setRequestHeader","send","data_attr","querySelectorAll","da","addEventListener","addCart","log","product_id","getAttribute","getItem","len","length","p_i","qty","k","getProductById","filter","data","found","setTimeout","setCart","parseInt","alert","size","cart","current_prod","push","getCart","SidebarCart","bt_del","bts","bt","onmouseover","bntDeleteMouseAction","onmouseout","onclick","deleteItemCart","msg","wrapper","querySelector","format_price","undefined","cart_empty","classList","toggle","item","c_i","cart_items","installment","conf","confirm","remove","property","num","arr","i","splice","parentElement","updateCart","sidebar_cart_footer","add","cart_total","parent","class_list","overlay","type","display"],"mappings":"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","file":"cart.js","sourcesContent":["/**\r\n * Scripts de listagem de produtos e carrinho.\r\n *\r\n * @Cart\r\n * @this {main}\r\n * @param {storage_name} s Nome do Storage.\r\n * @param {storage_value} s Valor do Storage.\r\n */\r\nconst Cart = {\r\n\r\n\t// Variáveis\r\n\tcart_bt_delete: '.delete',\r\n\tcart_list_produtcts: '.cart-list-produtcts',\r\n\tlist_products: 'listProdutos',\r\n\ttotal_items: 'totalItems',\r\n\ttotal_amount: 'totalAmount',\r\n\ttotal_installment: 'totalInstallment',\r\n\tdata_product_id: '[data-product-id]',\r\n\ttotal: 0,\r\n\titems: 0,\r\n\r\n\tinit: function(){\r\n\r\n\t\tthis.showProducts();\r\n\t},\r\n\r\n\t/** \r\n\t * Ao carregar a página, pegamos os produtos do Json\r\n\t */\r\n\tshowProducts: function(){\r\n\r\n\t\tconst fileJson = '/data/products.json',\r\n\t\t\t  xmlhttp = Util.verifyXmlHttp();\r\n\r\n\t\t// Verificamos os estados da requisição\r\n\t\txmlhttp.onreadystatechange = function(){\r\n\r\n\t\t\t// Verifica se a página foi carregada corretamente\r\n\t\t\tif(xmlhttp.readyState === 4 && xmlhttp.status === 200) {\r\n\t\t\t\tlet dadosJSON;\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tdadosJSON = JSON.parse(xmlhttp.responseText);\r\n\r\n\t\t\t\t\tlet products = dadosJSON.products, \r\n\t\t\t\t\t\tdiv = document.getElementById( 'listProdutos' ),\r\n\t\t\t\t\t\tid, sku, title, description, available_sizes, style, price, installments, price_installments, currency_id, currency_format, shipping;\r\n\r\n\t\t\t\t\tproducts.sort((a, b) => {\r\n\t\t\t\t\t    if(a.id < b.id) return -1;\r\n\t\t\t\t\t    if(a.id > b.id) return 1;\r\n\r\n\t\t\t\t\t    return 0;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tproducts.forEach( prod => {\r\n\r\n\t\t\t\t\t\tid = prod.id;\r\n\t\t\t\t\t\tsku = prod.sku;\r\n\t\t\t\t\t\ttitle = prod.title;\r\n\t\t\t\t\t\tdescription = prod.description;\r\n\t\t\t\t\t\tavailable_sizes = prod.availableSizes;\r\n\t\t\t\t\t\tstyle = prod.style;\r\n\t\t\t\t\t\tprice = Util.formatCoin( prod.price );\r\n\t\t\t\t\t\tinstallments = prod.installments;\r\n\t\t\t\t\t\tcurrency_id = prod.currencyId;\r\n\t\t\t\t\t\tcurrency_format = prod.currencyFormat;\r\n\t\t\t\t\t\tshipping = prod.isFreeShipping;\r\n\r\n\t\t\t\t\t\tprice_installments = prod.price / installments;\r\n\t\t\t\t\t\tprice_installments = parseFloat( price_installments.toFixed(2) );\r\n\t\t\t\t\t\tprice_installments = Util.formatCoin( price_installments );\r\n\r\n\t\t\t\t\t\tconst listing = `<div class=\"col-xs-12 col-sm-4 col-md-4 col-lg-4\">\r\n\t\t\t\t\t\t\t<div id=\"product_id_${id}\" data-qtde=\"${installments}\" class=\"products\">\r\n\t\t\t\t\t\t\t\t<div class=\"products-header\">\r\n\t\t\t\t\t\t\t\t\t<img src=\"https://placeholdit.imgix.net/~text?txtsize=33&txt=Corinthians&w=180&h=230\" alt=\"${title}\">\r\n\t\t\t\t\t\t\t\t\t<span>${title}</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"products-infos\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"products-infos_price\">${currency_format} ${price}</span>\r\n\t\t\t\t\t\t\t\t\t<span class=\"products-infos_installments\">ou ${installments}x ${currency_format} ${price_installments}</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"products-add-cart\">\r\n\t\t\t\t\t\t\t\t\t<button class=\"bt bt-yellow bt-add-cart\" data-product-id=\"${id}\" data-toggle=\"sidebar-cart\">Adicionar ao carrinho</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>`;\r\n\r\n\t\t\t\t\t\tdiv.innerHTML += listing;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tlocalStorage.setItem( 'products', JSON.stringify( products ) );\r\n\r\n\t\t\t\t\tCart.actionAddCart();\r\n\r\n\t\t\t\t} catch(e) {\r\n\t\t\t\t\teval(\"dadosJSON = (\" + xmlhttp.responseText + \");\");\r\n\t\t\t\t\tconsole.error( 'Algo deu errado: ' + e );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t \r\n\t\t// Abre a requisição com o método e url\r\n\t\txmlhttp.open('GET', fileJson, true);\r\n\r\n\t\t// Modifica o MimeType da requisição\r\n\t\txmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n\r\n\t\t// Envia os valores\r\n\t\txmlhttp.send(null);\r\n\t},\r\n\r\n\t/** \r\n\t * Ação para ativar o botão de adicionar um produto ao carrinho\r\n\t */\r\n\tactionAddCart: function() {\r\n\r\n\t\t// Botão de add item ao carrinho\r\n\t\tlet data_attr = document.querySelectorAll( '.bt-add-cart' );\r\n\r\n\t\tdata_attr.forEach(da => {\r\n\t\t\t// data_attr.onclick = addToCart;\r\n\t\t\tda.addEventListener( 'click', this.addCart );\r\n\t\t});\r\n\t},\r\n\r\n\t/** \r\n\t * Adicionar um produto ao carrinho\r\n\t */\r\n\taddCart: function () {\r\n\r\n\t\tconsole.log('Adicionado')\r\n\r\n\t\tlet product_id = this.getAttribute( 'data-product-id' ),\r\n\t\t\tproducts = JSON.parse( localStorage.getItem( 'products' ) ), \r\n\t\t\tlen = products.length,\r\n\t\t\tp_i = products.id,\r\n\t\t\tqty = 1,\r\n\t\t\tk;\r\n\t\t\r\n\t\tfunction getProductById(id) {\r\n\t\t\treturn products.filter(data => {\r\n\t\t\t\treturn data.id == id;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tlet found = getProductById( product_id );\r\n\r\n\t\tif( found.length > 0 ) {\r\n\r\n\t\t\tif (qty > 0) {\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tCart.setCart( found[0].id, parseInt(qty), found[0].title, found[0].price, found[0].availableSizes, found[0].style );\r\n\t\t\t\t\tconsole.log('Adicionado')\r\n\t\t\t\t}, 2000);\r\n\t\t\t} else {\r\n\t\t\t\talert( 'Adicione ao menos 1 item ao seu carrinho!' );\r\n\t\t\t}\r\n\t\t} else{\r\n\t\t\talert( 'Oops! Algo errado aconteceu, por favor, tente novamente mais tarde...' );\r\n\t\t}\t\t\r\n\t},\r\n\r\n\t/** \r\n\t * Adicionar um produto no Storage\r\n\t */\r\n\tsetCart: function ( id, qty, title, price, size, style ) {\r\n\r\n\t\tlet cart = ( JSON.parse( localStorage.getItem('cart') ) != null ) ? JSON.parse( localStorage.getItem('cart') ) : { items: [] },\r\n\t\t\tcurrent_prod = cart.items, \r\n\t\t\tk;\r\n\r\n\t\tfunction getProductById(id) {\r\n\t\t\treturn current_prod.filter(data => data.id == id);\r\n\t\t}\r\n\r\n\t\tlet found = getProductById( id );\r\n\r\n\t\tif( found.length > 0 ) {\r\n\t\t\tconsole.log( 'current_prod.qty: ' + found[0].qty, 'qty: ' + qty );\r\n\t\t\tfound[0].qty = parseInt( found[0].qty + qty );\r\n\t\t\tconsole.log( 'found[0].qty: ' + found[0].qty );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tlet prod = {\r\n\t\t\t\tid: id,\r\n\t\t\t\tqty: qty,\r\n\t\t\t\ttitle: title,\r\n\t\t\t\tprice: price,\r\n\t\t\t\tsize: size[0],\r\n\t\t\t\tstyle: style\r\n\t\t\t};\r\n\r\n\t\t\tcart.items.push( prod );\r\n\t\t}\r\n\r\n\t\tlocalStorage.setItem( 'cart', JSON.stringify( cart ) );\r\n\r\n\t\tthis.getCart();\r\n\t\tSidebarCart.open();\r\n\r\n\t\t// Botão de excluir item do carrinho\r\n\t\tlet bt_del = document.querySelectorAll( this.cart_bt_delete ), \r\n\t\t\tbts = bt_del.length;\r\n\r\n\t\tbt_del.forEach(bt => {\r\n\t\t\tbt.onmouseover = this.bntDeleteMouseAction;\r\n\t\t\tbt.onmouseout = this.bntDeleteMouseAction;\r\n\t\t\tbt.onclick = this.deleteItemCart;\r\n\t\t});\r\n\t},\r\n\r\n\t/** \r\n\t * Pegamos os itens do Storage\r\n\t */\r\n\tgetCart: function () {\r\n\r\n\t\tlet msg = '', \r\n\t\t\tcart = ( JSON.parse( localStorage.getItem('cart') ) != null ) ? JSON.parse( localStorage.getItem('cart') ) : { items: [] },\r\n\t\t\twrapper = document.querySelector( this.cart_list_produtcts ), \r\n\t\t\ttotal = 0,\r\n\t\t\tformat_price;\r\n\r\n\t\t\twrapper.innerHTML = '';\r\n\r\n\t\tif( cart == undefined  || cart == null || cart == '' || cart.items.length == 0 ){\r\n\t\t\tlet cart_empty = document.getElementById( 'msgCart' );\r\n\t\t\tcart_empty.innerHTML = 'Seu carrinho está vazio';\r\n\t\t\tcart_empty.classList.toggle('hide');\r\n\r\n\t\t\tdocument.querySelector('.sidebar-cart-footer, .cart-total').classList.toggle('hide');\r\n\t\t} else {\r\n\t\t\tlet item = '', \r\n\t\t\t\tc_i = cart.items;\r\n\r\n\t\t\tc_i.forEach(cart_items => {\r\n\t\t\t   \ttotal = total + ( cart_items.qty * cart_items.price );\r\n\t\t\t   \tformat_price = Util.formatCoin( cart_items.price );\r\n\r\n\t\t\t\titem += `<div class=\"produtcts-row\">\r\n\t\t\t\t<a role=\"button\" class=\"delete\" data-id=\"${cart_items.id}\" title=\"Deseja remover este produto do carrinho?\">&times;</a>\r\n\t\t\t\t<div class=\"produtcts-grid\">\r\n\t\t\t\t<div class=\"cart-list-produtcts_img\"><img src=\"https://placeholdit.imgix.net/~text?txtsize=55x55&txt=Camisa+Corinthians&w=50&h=50\"></div>\r\n\t\t\t\t<div class=\"cart-list-produtcts_infos\">\r\n\t\t\t\t<h4 class=\"product-title\">${cart_items.title}</h4>\r\n\t\t\t\t<div class=\"cart-list-produtcts_infos_details\">\r\n\t\t\t\t<span class=\"product-size\">${cart_items.size}</span>\r\n\t\t\t\t<span class=\"product-color\">${cart_items.style}</span>\r\n\t\t\t\t<span class=\"product-amount\">Quantidade: ${cart_items.qty}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"cart-list-produtcts_infos_price\">\r\n\t\t\t\t<span class=\"product-price\">R$ ${format_price}</span>\r\n\t\t\t\t</div></div></div><div class=\"overlay-delete\"></div></div>`;\r\n\t\t\t});\r\n\r\n\t\t\twrapper.classList.toggle('hide');\r\n\t\t\twrapper.innerHTML = item;\r\n\r\n\t\t\tlet installment = total / 10;\r\n\t\t\tinstallment = Util.formatCoin( parseFloat( installment.toFixed(2) ) );\r\n\t\t\tdocument.getElementById( this.total_installment ).innerHTML = `ou em até 10x de R$ ${installment}`;\r\n\r\n\t\t\ttotal = parseFloat( total.toFixed(2) );\r\n\t\t\ttotal = Util.formatCoin( total );\r\n\r\n\t\t\tdocument.getElementById( this.total_amount ).innerHTML = ' R$ ' + total;\r\n\r\n\t\t\tdocument.getElementById( this.total_items ).innerHTML = c_i.length;\r\n\t\t}\r\n\t},\r\n\r\n\t/** \r\n\t * Deletemas os itens do Storage\r\n\t */\r\n\tdeleteItemCart: function(){\r\n\r\n\t\tconst conf = confirm('Deseja excluir esse produto?');\r\n\r\n\t\tif( conf ){\r\n\t\t\tlet cart = ( JSON.parse( localStorage.getItem('cart') ) != null ) ? JSON.parse( localStorage.getItem('cart') ) : { items: [] },\r\n\t\t\t\tid = this.getAttribute( 'data-id' ),\r\n\t\t\t\tcart_items = cart.items,\r\n\t\t\t\tk;\r\n\r\n\t\t\tfunction getProductById(id) {\r\n\t\t\t\treturn cart_items.filter(function(data) {\r\n\t\t\t\t\treturn data.id == id;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tlet found = getProductById( id );\r\n\r\n\t\t\tif( found.length > 0 ) {\r\n\t\t\t\tfunction remove(property, num, arr) {\r\n\t\t\t\t    for (let i in arr) {\r\n\t\t\t\t        if (arr[i][property] == num) arr.splice(i, 1);\r\n\t\t\t\t    }\r\n\t\t\t\t}\r\n\r\n\t\t\t\tremove('id', id, cart_items);\r\n\r\n\t\t\t\tthis.parentElement.remove();\r\n\t\t\t}\r\n\r\n\t\t\tlocalStorage.setItem( 'cart', JSON.stringify(cart) );\r\n\r\n\t\t\tCart.updateCart();\r\n\t\t}\r\n\t},\r\n\r\n\tupdateCart: function(){\r\n\r\n\t\tlet cart = ( JSON.parse( localStorage.getItem('cart') ) != null ) ? JSON.parse( localStorage.getItem('cart') ) : { items: [] },\r\n\t\t\tcart_items = cart.items,\r\n\t\t\ttotal = 0;\r\n\r\n\t\tif( cart == undefined  || cart == null || cart == '' || cart_items.length == 0 ){\r\n\t\t\tlet cart_empty = document.getElementById( 'msgCart' );\r\n\t\t\tcart_empty.innerHTML = 'Seu carrinho está vazio';\r\n\t\t\tcart_empty.classList.toggle('hide');\r\n\r\n\t\t\tconst sidebar_cart_footer = document.querySelector('.sidebar-cart-footer');\r\n\t\t\tsidebar_cart_footer.classList.add('hide');\r\n\r\n\t\t\tconst cart_total = document.querySelector('.cart-total');\r\n\t\t\tcart_total.classList.add('hide');\r\n\t\t} else {\r\n\t\t\tcart_items.forEach(items => {\r\n\t\t\t\ttotal = total + ( items.qty * items.price );\r\n\t\t\t});\r\n\r\n\t\t\tconsole.log('total', total);\r\n\r\n\t\t\tlet installment = total / 10;\r\n\t\t\tinstallment = Util.formatCoin( parseFloat( installment.toFixed(2) ) );\r\n\t\t\tdocument.getElementById( this.total_installment ).innerHTML = `ou em até 10x de R$ ${installment}`;\r\n\r\n\t\t\ttotal = parseFloat( total.toFixed(2) );\r\n\t\t\ttotal = Util.formatCoin( total );\r\n\t\t\tdocument.getElementById( this.total_amount ).innerHTML = ' R$ ' + total;\r\n\r\n\t\t\tdocument.getElementById( this.total_items ).innerHTML = cart_items.length;\r\n\t\t}\r\n\t},\r\n\r\n\t/** \r\n\t * Excluir items do Carrinho\r\n\t */\r\n\tbntDeleteMouseAction: function (e) {\r\n\r\n\t\tlet parent = this.parentElement,\r\n\t\t\tclass_list = parent.classList,\r\n\t\t\toverlay = this.parentElement.querySelector( '.overlay-delete' );\r\n\r\n\t\tif( e.type == 'mouseover' ) {\r\n\t\t\toverlay.style.display = 'block';\r\n\t\t\tclass_list.add(\"strikethrough\");\r\n\t\t} else {\r\n\t\t\tclass_list.remove(\"strikethrough\");\r\n\t\t\toverlay.style.display = 'none';\r\n\t\t}\r\n\t}\r\n};\r\n\r\nCart.init();"]}